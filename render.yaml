version: "1"

services:
  - type: web
    name: go-chatroom
    runtime: go
    repo: https://github.com/motty93/go-chatroom
    plan: free
    buildCommand: go build -tags netgo -ldflags '-s -w' -o app
    startCommand: ./app
    region: singapore
    branch: master
    domains:
      - api.paput.io
    healthCheckPath: /health
    autoDeploy: true
    envVars:
      - key: PORT
        value: 8080
      - key: DB_URL
        value: postgresql://androots_chat_messages_owner:u4H5MbwpVDlg@ep-snowy-smoke-a1ed6f2l.ap-southeast-1.aws.neon.tech/androots_chat_messages?sslmode=require
      - key: TZ
        value: Asia/Tokyo
